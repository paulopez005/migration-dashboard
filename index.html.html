<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migration Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- Loading State -->
        <div id="loading" class="flex items-center justify-center min-h-screen">
            <div class="text-center">
                <div class="loader mx-auto"></div>
                <p class="mt-4 text-gray-600">Loading migration data...</p>
            </div>
        </div>

        <!-- Main Content (hidden initially) -->
        <div id="content" class="container mx-auto p-6 hidden">
            <!-- Breadcrumb -->
            <nav id="breadcrumb" class="mb-6"></nav>
            
            <!-- Dynamic Content Area -->
            <div id="mainContent"></div>
        </div>

        <!-- Error State (hidden initially) -->
        <div id="error" class="hidden flex items-center justify-center min-h-screen">
            <div class="text-center">
                <i data-lucide="alert-circle" class="w-16 h-16 text-red-500 mx-auto mb-4"></i>
                <h2 class="text-xl font-semibold text-gray-900 mb-2">Data Loading Error</h2>
                <p class="text-gray-600 mb-4">Please ensure the CSV file is in the same directory as this HTML file.</p>
                <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                    Retry
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dashboard Application
        const DashboardApp = {
            data: [],
            currentView: 'goals',
            selectedGoal: null,
            selectedService: null,
            selectedSection: null,
            expandedSubsections: {},
            csvFileName: 'Migration update dashboard.csv', // Update this to match your CSV filename

            init() {
                this.loadCSVData();
            },

            async loadCSVData() {
                try {
                    // Try to fetch the CSV file from the same directory
                    const response = await fetch(this.csvFileName);
                    
                    if (!response.ok) {
                        throw new Error('CSV file not found');
                    }
                    
                    const csvText = await response.text();
                    
                    // Parse CSV with PapaParse
                    const result = Papa.parse(csvText, {
                        header: true,
                        dynamicTyping: true,
                        skipEmptyLines: true,
                        delimitersToGuess: [',', '\t', '|', ';']
                    });

                    // Clean and prepare the data
                    this.data = result.data.map(row => ({
                        GOAL: row.GOAL || '',
                        'SERVICE TYPE': row['SERVICE TYPE'] || '',
                        SECTION: row.SECTION || '',
                        SUBSECTION: row.SUBSECTION || '',
                        'SUBSECTION TASK': row['SUBSECTION TASK'] || '',
                        STATUS: row.STATUS || 'Not Started',
                        'MIGRATION IMPACT': row['MIGRATION IMPACT'] || 'To be confirmed'
                    })).filter(row => row.GOAL); // Filter out empty rows

                    // Hide loading, show content
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('content').classList.remove('hidden');
                    
                    // Initial render
                    this.render();
                    
                } catch (error) {
                    console.error('Error loading CSV:', error);
                    document.getElementById('loading').classList.add('hidden');
                    document.getElementById('error').classList.remove('hidden');
                }
            },

            groupBy(array, key) {
                return array.reduce((result, currentValue) => {
                    const groupKey = currentValue[key];
                    if (!result[groupKey]) {
                        result[groupKey] = [];
                    }
                    result[groupKey].push(currentValue);
                    return result;
                }, {});
            },

            calculateCompletion(groupByKey, filter = {}) {
                let filteredData = [...this.data];
                
                Object.entries(filter).forEach(([key, value]) => {
                    if (value) {
                        filteredData = filteredData.filter(row => row[key] === value);
                    }
                });

                const grouped = this.groupBy(filteredData, groupByKey);

                return Object.entries(grouped).map(([name, rows]) => {
                    const completed = rows.filter(row => row.STATUS === 'Complete').length;
                    const inProgress = rows.filter(row => 
                        row.STATUS === 'In Progress' || row.STATUS === 'In progress'
                    ).length;
                    const pending = rows.filter(row => row.STATUS === 'Pending').length;
                    const blocked = rows.filter(row => 
                        row.STATUS === 'Blocked' || row.STATUS === 'On Hold'
                    ).length;
                    const notStarted = rows.filter(row => 
                        row.STATUS === 'Not Started' || row.STATUS === 'Backlog'
                    ).length;
                    
                    const total = rows.length;
                    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    const migrationBlockers = rows.filter(row => 
                        row['MIGRATION IMPACT'] === 'Migration Blocker'
                    ).length;
                    
                    return {
                        name,
                        completed,
                        inProgress,
                        pending,
                        blocked,
                        notStarted,
                        total,
                        percentage,
                        migrationBlockers,
                        rows
                    };
                });
            },

            getStatusColor(percentage) {
                if (percentage === 100) return 'text-green-600 bg-green-100';
                if (percentage >= 70) return 'text-yellow-600 bg-yellow-100';
                if (percentage >= 40) return 'text-orange-600 bg-orange-100';
                return 'text-red-600 bg-red-100';
            },

            getProgressBarColor(percentage) {
                if (percentage === 100) return 'bg-green-500';
                if (percentage >= 70) return 'bg-yellow-500';
                if (percentage >= 40) return 'bg-orange-500';
                return 'bg-red-500';
            },

            getItemStatusColor(status) {
                const statusMap = {
                    'Complete': 'bg-green-100 text-green-800',
                    'In Progress': 'bg-blue-100 text-blue-800',
                    'In progress': 'bg-blue-100 text-blue-800',
                    'Pending': 'bg-yellow-100 text-yellow-800',
                    'Blocked': 'bg-red-100 text-red-800',
                    'On Hold': 'bg-red-100 text-red-800',
                    'Not Started': 'bg-gray-100 text-gray-800',
                    'Backlog': 'bg-gray-100 text-gray-800'
                };
                return statusMap[status] || 'bg-gray-100 text-gray-600';
            },

            getImpactColor(impact) {
                const impactMap = {
                    'Closed': 'bg-green-100 text-green-800',
                    'Migration Blocker': 'bg-red-100 text-red-800',
                    'Post-migration impact': 'bg-orange-100 text-orange-800',
                    'No impact': 'bg-blue-100 text-blue-800',
                    'No': 'bg-blue-100 text-blue-800',
                    'To be confirmed': 'bg-gray-100 text-gray-600'
                };
                return impactMap[impact] || 'bg-gray-100 text-gray-600';
            },

            navigateTo(view, params = {}) {
                this.currentView = view;
                if (params.goal) this.selectedGoal = params.goal;
                if (params.service) this.selectedService = params.service;
                if (params.section) this.selectedSection = params.section;
                this.render();
            },

            goBack() {
                if (this.currentView === 'subsections') {
                    this.currentView = 'sections';
                } else if (this.currentView === 'sections') {
                    this.currentView = 'services';
                } else if (this.currentView === 'services') {
                    this.currentView = 'goals';
                }
                this.render();
            },

            renderBreadcrumb() {
                let html = '<div class="flex items-center space-x-2 text-sm text-gray-600">';
                
                html += `<button onclick="DashboardApp.navigateTo('goals')" class="hover:text-blue-600 transition-colors">Goals</button>`;
                
                if (this.selectedGoal) {
                    html += `<i data-lucide="chevron-right" class="w-4 h-4"></i>`;
                    html += `<button onclick="DashboardApp.navigateTo('services')" class="hover:text-blue-600 transition-colors">${this.selectedGoal}</button>`;
                }
                
                if (this.selectedService) {
                    html += `<i data-lucide="chevron-right" class="w-4 h-4"></i>`;
                    html += `<button onclick="DashboardApp.navigateTo('sections')" class="hover:text-blue-600 transition-colors">${this.selectedService}</button>`;
                }
                
                if (this.selectedSection) {
                    html += `<i data-lucide="chevron-right" class="w-4 h-4"></i>`;
                    html += `<span class="text-gray-900 font-medium">${this.selectedSection}</span>`;
                }
                
                html += '</div>';
                document.getElementById('breadcrumb').innerHTML = html;
            },

            renderGoalsView() {
                const goals = this.calculateCompletion('GOAL');
                const goalETAs = {
                    'PREPAID': '31-October-2025',
                    'POSTPAID': '30-November-2025',
                    'Delta': 'TBC'
                };
                
                let html = `
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Migration Dashboard</h1>
                        <p class="text-gray-600">Overview of migration progress across all goals</p>
                        <p class="text-xs text-gray-500 mt-2">Last updated: ${new Date().toLocaleString()}</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                `;
                
                goals.forEach(goal => {
                    html += `
                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-lg transition-all cursor-pointer transform hover:scale-[1.02]"
                             onclick="DashboardApp.navigateTo('services', {goal: '${goal.name}'})">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900">${goal.name}</h3>
                                        <div class="text-sm text-gray-500 mt-1">
                                            ETA: <span class="font-medium">${goalETAs[goal.name] || 'Not specified'}</span>
                                        </div>
                                    </div>
                                    <div class="px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${this.getStatusColor(goal.percentage)}">
                                        ${goal.percentage}%
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                                        <span>Progress</span>
                                        <span class="font-medium">${goal.completed} / ${goal.total}</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                                        <div class="h-2 rounded-full transition-all duration-500 ${this.getProgressBarColor(goal.percentage)}"
                                             style="width: ${goal.percentage}%"></div>
                                    </div>
                                </div>
                                
                                ${goal.migrationBlockers > 0 ? `
                                    <div class="mb-3 flex items-center gap-2 text-sm">
                                        <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500"></i>
                                        <span class="text-red-700 font-medium">
                                            ${goal.migrationBlockers} Migration Blocker${goal.migrationBlockers > 1 ? 's' : ''}
                                        </span>
                                    </div>
                                ` : ''}
                                
                                <div class="space-y-1 text-xs">
                                    <div class="flex justify-between">
                                        <span class="text-gray-500">In Progress:</span>
                                        <span class="font-medium text-blue-600">${goal.inProgress}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-500">Pending:</span>
                                        <span class="font-medium text-yellow-600">${goal.pending}</span>
                                    </div>
                                    ${goal.blocked > 0 ? `
                                        <div class="flex justify-between">
                                            <span class="text-gray-500">Blocked:</span>
                                            <span class="font-medium text-red-600">${goal.blocked}</span>
                                        </div>
                                    ` : ''}
                                </div>
                                
                                <div class="flex justify-end mt-4">
                                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                
                // Overall Statistics
                const totalCompleted = this.data.filter(d => d.STATUS === 'Complete').length;
                const totalInProgress = this.data.filter(d => d.STATUS === 'In Progress' || d.STATUS === 'In progress').length;
                const totalBlockers = this.data.filter(d => d['MIGRATION IMPACT'] === 'Migration Blocker').length;
                
                html += `
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">Overall Statistics</h2>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-gray-900">${this.data.length}</div>
                                <div class="text-sm text-gray-600">Total Tasks</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-green-600">${totalCompleted}</div>
                                <div class="text-sm text-gray-600">Completed</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-blue-600">${totalInProgress}</div>
                                <div class="text-sm text-gray-600">In Progress</div>
                            </div>
                            <div class="bg-white rounded-lg p-4">
                                <div class="text-2xl font-bold text-red-600">${totalBlockers}</div>
                                <div class="text-sm text-gray-600">Blockers</div>
                            </div>
                        </div>
                    </div>
                `;
                
                return html;
            },

            renderServicesView() {
                const services = this.calculateCompletion('SERVICE TYPE', { GOAL: this.selectedGoal });
                
                let html = `
                    <div class="flex items-center mb-6">
                        <button onclick="DashboardApp.goBack()" class="mr-4 p-2 hover:bg-gray-100 rounded-lg transition-colors">
                            <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        </button>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">${this.selectedGoal} - Service Types</h1>
                            <p class="text-gray-600">Service type breakdown for ${this.selectedGoal}</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                `;
                
                services.forEach(service => {
                    html += `
                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-lg transition-all cursor-pointer transform hover:scale-[1.02]"
                             onclick="DashboardApp.navigateTo('sections', {service: '${service.name}'})">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-900">${service.name}</h3>
                                    <div class="px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${this.getStatusColor(service.percentage)}">
                                        ${service.percentage}%
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                                        <span>Completion</span>
                                        <span class="font-medium">${service.completed} / ${service.total}</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                                        <div class="h-2 rounded-full transition-all duration-500 ${this.getProgressBarColor(service.percentage)}"
                                             style="width: ${service.percentage}%"></div>
                                    </div>
                                </div>
                                
                                ${service.migrationBlockers > 0 ? `
                                    <div class="mb-3 flex items-center gap-2 text-sm">
                                        <i data-lucide="alert-triangle" class="w-4 h-4 text-red-500"></i>
                                        <span class="text-red-700 font-medium">
                                            ${service.migrationBlockers} Blocker${service.migrationBlockers > 1 ? 's' : ''}
                                        </span>
                                    </div>
                                ` : ''}
                                
                                <div class="grid grid-cols-2 gap-2 text-xs">
                                    <div class="flex justify-between">
                                        <span class="text-gray-500">Active:</span>
                                        <span class="font-medium text-blue-600">${service.inProgress}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-500">Pending:</span>
                                        <span class="font-medium text-yellow-600">${service.pending}</span>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end mt-4">
                                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                return html;
            },

            renderSectionsView() {
                const sections = this.calculateCompletion('SECTION', { 
                    GOAL: this.selectedGoal, 
                    'SERVICE TYPE': this.selectedService 
                });
                
                let html = `
                    <div class="flex items-center mb-6">
                        <button onclick="DashboardApp.goBack()" class="mr-4 p-2 hover:bg-gray-100 rounded-lg transition-colors">
                            <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        </button>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">${this.selectedGoal} - ${this.selectedService}</h1>
                            <p class="text-gray-600">Section breakdown</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                `;
                
                sections.forEach(section => {
                    html += `
                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-lg transition-all cursor-pointer transform hover:scale-[1.02]"
                             onclick="DashboardApp.navigateTo('subsections', {section: '${section.name.replace(/'/g, "\\'")}'})">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-900">${section.name}</h3>
                                    <div class="px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${this.getStatusColor(section.percentage)}">
                                        ${section.percentage}%
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="flex justify-between text-sm text-gray-600 mb-1">
                                        <span>Tasks Complete</span>
                                        <span class="font-medium">${section.completed} / ${section.total}</span>
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                                        <div class="h-2 rounded-full transition-all duration-500 ${this.getProgressBarColor(section.percentage)}"
                                             style="width: ${section.percentage}%"></div>
                                    </div>
                                </div>
                                
                                <div class="space-y-2 text-xs">
                                    ${section.inProgress > 0 ? `
                                        <div class="flex items-center gap-2">
                                            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                            <span class="text-gray-600">In Progress: ${section.inProgress}</span>
                                        </div>
                                    ` : ''}
                                    ${section.pending > 0 ? `
                                        <div class="flex items-center gap-2">
                                            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                            <span class="text-gray-600">Pending: ${section.pending}</span>
                                        </div>
                                    ` : ''}
                                    ${section.blocked > 0 ? `
                                        <div class="flex items-center gap-2">
                                            <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                            <span class="text-gray-600">Blocked: ${section.blocked}</span>
                                        </div>
                                    ` : ''}
                                </div>
                                
                                <div class="flex justify-end mt-4">
                                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                return html;
            },

            renderSubsectionsView() {
                const filteredData = this.data.filter(row => 
                    row.GOAL === this.selectedGoal && 
                    row['SERVICE TYPE'] === this.selectedService &&
                    row.SECTION === this.selectedSection
                );

                const subsections = this.groupBy(filteredData, 'SUBSECTION');
                
                let html = `
                    <div class="flex items-center mb-6">
                        <button onclick="DashboardApp.goBack()" class="mr-4 p-2 hover:bg-gray-100 rounded-lg transition-colors">
                            <i data-lucide="arrow-left" class="w-5 h-5"></i>
                        </button>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">
                                ${this.selectedGoal} - ${this.selectedService} - ${this.selectedSection}
                            </h1>
                            <p class="text-gray-600">Detailed task breakdown</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                `;
                
                Object.entries(subsections).forEach(([subsectionName, tasks]) => {
                    const hasSubtasks = tasks.some(t => t['SUBSECTION TASK'] && t['SUBSECTION TASK'].trim() !== '');
                    const isExpanded = this.expandedSubsections[subsectionName];
                    const completed = tasks.filter(t => t.STATUS === 'Complete').length;
                    const total = tasks.length;
                    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
                    
                    if (!hasSubtasks && tasks.length === 1) {
                        const task = tasks[0];
                        html += `
                            <div class="bg-white rounded-lg border border-gray-200 shadow-sm p-4 hover:bg-gray-50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div class="flex-1">
                                        <h3 class="text-base font-medium text-gray-900">${subsectionName}</h3>
                                        <div class="flex flex-wrap gap-2 mt-2">
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${this.getItemStatusColor(task.STATUS)}">
                                                ${task.STATUS}
                                            </span>
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${this.getImpactColor(task['MIGRATION IMPACT'])}">
                                                ${task['MIGRATION IMPACT']}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="bg-white rounded-lg border border-gray-200 shadow-sm">
                                <div class="p-4 border-b border-gray-200 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors"
                                     onclick="DashboardApp.toggleSubsection('${subsectionName.replace(/'/g, "\\'")}')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <i data-lucide="chevron-right" class="w-5 h-5 text-gray-500 transition-transform ${isExpanded ? 'rotate-90' : ''}"></i>
                                            <h3 class="text-lg font-semibold text-gray-900">${subsectionName}</h3>
                                        </div>
                                        <div class="flex items-center gap-4">
                                            <div class="flex items-center gap-2">
                                                <div class="w-32 bg-gray-200 rounded-full h-2 overflow-hidden">
                                                    <div class="h-2 rounded-full transition-all duration-500 ${this.getProgressBarColor(percentage)}"
                                                         style="width: ${percentage}%"></div>
                                                </div>
                                                <span class="text-sm font-medium text-gray-700">${percentage}%</span>
                                            </div>
                                            <span class="text-sm text-gray-600">
                                                ${completed} / ${total} tasks
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                ${isExpanded ? `
                                    <div class="divide-y divide-gray-200">
                                        ${tasks.map((task, index) => `
                                            <div class="p-4 hover:bg-gray-50 transition-colors">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        ${task['SUBSECTION TASK'] && task['SUBSECTION TASK'].trim() !== '' ? `
                                                            <div class="flex flex-wrap gap-2">
                                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${this.getItemStatusColor(task.STATUS)}">
                                                                ${task.STATUS}
                                                            </span>
                                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${this.getImpactColor(task['MIGRATION IMPACT'])}">
                                                                ${task['MIGRATION IMPACT']}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        `;
                    }
                });
                
                html += '</div>';
                return html;
            },

            toggleSubsection(subsectionName) {
                this.expandedSubsections[subsectionName] = !this.expandedSubsections[subsectionName];
                this.render();
            },

            render() {
                // Render breadcrumb
                this.renderBreadcrumb();
                
                // Render main content based on current view
                let content = '';
                switch(this.currentView) {
                    case 'goals':
                        content = this.renderGoalsView();
                        break;
                    case 'services':
                        content = this.renderServicesView();
                        break;
                    case 'sections':
                        content = this.renderSectionsView();
                        break;
                    case 'subsections':
                        content = this.renderSubsectionsView();
                        break;
                }
                
                document.getElementById('mainContent').innerHTML = content;
                
                // Reinitialize Lucide icons
                lucide.createIcons();
            }
        };

        // Initialize the app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            DashboardApp.init();
        });

        // Auto-refresh every 5 minutes (optional)
        setInterval(() => {
            console.log('Auto-refreshing data...');
            location.reload();
        }, 5 * 60 * 1000);
    </script>
</body>
</html> class="font-medium text-gray-900 mb-2">
                                                                ${task['SUBSECTION TASK']}
                                                            </div>
                                                        ` : ''}
                                                        <div